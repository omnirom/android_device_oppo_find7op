on early-init
    write /sys/block/mmcblk0/queue/read_ahead_kb 2048

on property:sys.boot_completed=1
    # according to Qcom this legacy value improves first launch latencies
    # stock value is 512k
    setprop dalvik.vm.heapminfree 2m
    setprop sys.io.scheduler "bfq"

    # cpufreq settings
    chown system.system /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
    chown system.system /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
    chown system.system /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    chmod 0664 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor

    # msm hotplug
    write /sys/module/msm_hotplug/min_cpus_online 1
    write /sys/module/msm_hotplug/cpus_boosted 2
    write /sys/module/msm_hotplug/down_lock_duration 500
    write /sys/module/msm_hotplug/boost_lock_duration 2500
    write /sys/module/msm_hotplug/update_rates 200 5:100 50:50 350:200
    write /sys/module/msm_hotplug/fast_lane_load 100
    write /sys/module/msm_hotplug/max_cpus_online_susp 1
    write /sys/module/msm_hotplug/msm_enabled 0

    # VM tuning
    write /proc/sys/vm/dirty_background_ratio 20
    write /proc/sys/vm/dirty_expire_centisecs 200
    write /proc/sys/vm/dirty_ratio 40
    write /proc/sys/vm/page-cluster 0
    write /proc/sys/vm/swappiness 0
    write /proc/sys/vm/vfs_cache_pressure 80
    
    # mics tweaks
    write /sys/kernel/sched/gentle_fair_sleepers 0
    write /sys/module/adreno_idler/parameters/adreno 1
    write /sys/module/kernel/parameters/initcall_debug "N"
    write /sys/module/alarm_dev/parameters/debug_mask 0
    write /sys/module/binder/parameters/debug_mask 0
    write /sys/module/xt_qtaguid/parameters/debug_mask 0
    write /sys/block/mmcblk0/queue/add_random 0
    write /sys/module/workqueue/parameters/power_efficient 1
    write /sys/module/sync/parameters/fsync_enabled "Y"
    write /sys/module/state_notifier/parameters/enabled 1
    write /dev/cpuctl/cpu.notify_on_migrate 1

    # cpu boost
    write /sys/module/cpu_boost/parameters/boost_ms 20
    write /sys/module/cpu_boost/parameters/sync_threshold 0
    write /sys/module/cpu_boost/parameters/input_boost_freq 1497600
    write /sys/module/cpu_boost/parameters/input_boost_ms 40
    write /sys/module/cpu_boost/parameters/input_boost_enabled 0
    write /sys/module/cpu_boost/parameters/hotplug_boost "N"

    # IO
    write /sys/block/mmcblk0/queue/rq_affinity 1
    write /sys/block/mmcblk0/queue/add_random 0
    write /sys/block/mmcblk0/bdi/min_ratio 5
    write /sys/block/mmcblk0/queue/read_ahead_kb 1024
    write /sys/block/mmcblk0/queue/scheduler "bfq"

    # wakelocks
    write /sys/module/wakeup/parameters/enable_wlan_rx_wake_ws "N"
    write /sys/module/wakeup/parameters/enable_wlan_ctrl_wake_ws "N"
    write /sys/module/wakeup/parameters/enable_wlan_wake_ws "N"
    write /sys/module/wakeup/parameters/enable_si_ws "N"
    write /sys/module/wakeup/parameters/enable_msm_hsic_ws "N"
write /sys/module/wakeup/parameters/enable_bluesleep_ws "N"
